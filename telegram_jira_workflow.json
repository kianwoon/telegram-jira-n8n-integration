{\n  \"name\": \"Telegram-Jira AI Integration\",\n  \"nodes\": [\n    {\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"name\": \"Telegram Trigger\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"typeVersion\": 1,\n      \"position\": [\n        -760,\n        -280\n      ],\n      \"id\": \"bede7975-a069-4ede-8df3-10a8bee4e3a5\",\n      \"webhookId\": \"f19928cb-e4e3-4b9c-9bfd-794feba29efc\",\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"FaODKie7UqYKeWYl\",\n          \"name\": \"Telegram account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"chatInput\",\n              \"value\": \"={{ $json.message.text }}\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"name\": \"Set Prompt\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 1,\n      \"position\": [\n        -540,\n        -280\n      ],\n      \"id\": \"664b893c-a5c0-4382-9f45-70702edd60ae\"\n    },\n    {\n      \"parameters\": {\n        \"options\": {\n          \"systemMessage\": \"You are an AI assistant that helps users interact with Jira through Telegram. Based on the user's message, determine the appropriate Jira action to take.\\n\\nUser message: \\\"{{$node[\\\"Set Prompt\\\"].json[\\\"chatInput\\\"]}}\\\".\\n\\nYour task is to analyze this message and respond with a JSON object containing the appropriate action and parameters.\\n\\nPossible actions:\\n1. \\\"create\\\" - Create a new Jira issue\\n2. \\\"listProjects\\\" - List all available Jira projects\\n\\nFor \\\"create\\\" action, include:\\n- project: The project key (e.g., \\\"TEST\\\")\\n- issueType: The type of issue (e.g., \\\"Task\\\", \\\"Bug\\\")\\n- summary: A brief summary of the issue\\n- description: A detailed description of the issue\\n\\nFor \\\"listProjects\\\" action, no additional parameters are needed.\\n\\nRespond ONLY with the JSON object, no additional text. Example responses:\\n\\nFor creating an issue:\\n{\\\"action\\\":\\\"create\\\",\\\"project\\\":\\\"TEST\\\",\\\"issueType\\\":\\\"Task\\\",\\\"summary\\\":\\\"Bug reported by user\\\",\\\"description\\\":\\\"The login page crashes when clicking Submit.\\\"}\\n\\nFor listing projects:\\n{\\\"action\\\":\\\"listProjects\\\"}\\n\\nMake sure to determine the most appropriate action based on the user's intent.\"\n        }\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"typeVersion\": 1.8,\n      \"position\": [\n        -320,\n        -280\n      ],\n      \"name\": \"AI Agent GPT-4o\",\n      \"id\": \"956f98ae-1c59-479b-b81c-8e85e7b5302e\"\n    },\n    {\n      \"parameters\": {\n        \"functionCode\": \"// Try to parse the AI output as JSON\\ntry {\\n  // Extract the JSON part from the AI response\\n  // For Langchain agent, the output is in output property\\n  const aiOutput = items[0].json.output || '';\\n  \\n  // Try to find JSON in the response if it's not pure JSON\\n  let jsonMatch = aiOutput.match(/\\\\{[\\\\s\\\\S]*\\\\}/m);\\n  const jsonString = jsonMatch ? jsonMatch[0] : aiOutput;\\n  \\n  // Parse the JSON\\n  const parsedOutput = JSON.parse(jsonString);\\n  \\n  // Return the parsed output\\n  return {\\n    json: parsedOutput\\n  };\\n} catch (error) {\\n  // If parsing fails, default to create action\\n  console.log('Error parsing AI output, defaulting to create action:', error.message);\\n  return {\\n    json: {\\n      action: 'create',\\n      project: 'TEST',\\n      issueType: 'Task',\\n      summary: 'Task from Telegram',\\n      description: items[0].json.chatInput || 'No description provided'\\n    }\\n  };\\n}\"\n      },\n      \"name\": \"Parse AI Output\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"typeVersion\": 1,\n      \"position\": [\n        -100,\n        -280\n      ]\n    },\n    {\n      \"parameters\": {\n        \"rules\": {\n          \"rules\": [\n            {\n              \"value1\": \"={{ $json.action }}\",\n              \"operation\": \"equal\",\n              \"value2\": \"create\"\n            },\n            {\n              \"value1\": \"={{ $json.action }}\",\n              \"operation\": \"equal\",\n              \"value2\": \"listProjects\"\n            }\n          ],\n          \"output\": [\n            {\n              \"outputIndex\": 0\n            },\n            {\n              \"outputIndex\": 1\n            }\n          ]\n        }\n      },\n      \"name\": \"Switch Operation\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"typeVersion\": 1,\n      \"position\": [\n        -100,\n        -80\n      ]\n    },\n    {\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"chatId\",\n              \"value\": \"={{ $item(0).$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"] }}\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"name\": \"Set Chat ID\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 1,\n      \"position\": [\n        60,\n        -280\n      ],\n      \"id\": \"d46301cb-8d2e-4b28-9cef-ff22b5a2f2a9\"\n    },\n    {\n      \"parameters\": {\n        \"chatId\": \"={{ $json.chatId }}\",\n        \"text\": \"={{ $json.output }}\",\n        \"additionalFields\": {}\n      },\n      \"name\": \"Telegram Reply\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"typeVersion\": 1,\n      \"position\": [\n        280,\n        -280\n      ],\n      \"id\": \"1f075992-691b-46e1-980c-439bad12c6ca\",\n      \"webhookId\": \"707326b5-d5ea-4c27-a929-28ae2b31aca5\",\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"FaODKie7UqYKeWYl\",\n          \"name\": \"Telegram account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"value\": \"gpt-4o\",\n          \"mode\": \"list\"\n        },\n        \"options\": {}\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"typeVersion\": 1.2,\n      \"position\": [\n        -340,\n        -80\n      ],\n      \"name\": \"OpenAI Chat Model\",\n      \"id\": \"1cc73e10-f7a9-4dda-b21b-8f3f2652b7b8\",\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"ZqM1F3VwVFcwsqQv\",\n          \"name\": \"OpenAi account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"jiraVersion\": \"server\",\n        \"project\": \"={{ $json.project }}\",\n        \"issueType\": \"={{ $json.issueType }}\",\n        \"summary\": \"={{ $json.summary }}\",\n        \"additionalFields\": {\n          \"description\": \"={{ $json.description }}\"\n        }\n      },\n      \"type\": \"n8n-nodes-base.jira\",\n      \"typeVersion\": 1,\n      \"position\": [\n        40,\n        -20\n      ],\n      \"id\": \"4f8c8136-ca2f-4e77-825d-fc41610057c6\",\n      \"name\": \"Jira Create Issue\",\n      \"credentials\": {\n        \"jiraSoftwareServerApi\": {\n          \"id\": \"xyDueKIhOSyg9ih7\",\n          \"name\": \"Jira SW Server account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"jiraVersion\": \"server\",\n        \"resource\": \"project\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"name\": \"Jira List Projects\",\n      \"type\": \"n8n-nodes-base.jira\",\n      \"typeVersion\": 1,\n      \"position\": [\n        40,\n        100\n      ],\n      \"credentials\": {\n        \"jiraSoftwareServerApi\": {\n          \"id\": \"xyDueKIhOSyg9ih7\",\n          \"name\": \"Jira SW Server account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"functionCode\": \"// Count the number of projects\\nconst projectCount = items.length;\\n\\n// Create a user-friendly message\\nreturn [\\n  {\\n    json: {\\n      output: `There are ${projectCount} projects in Jira.`\\n    }\\n  }\\n];\"\n      },\n      \"name\": \"Count Projects\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"typeVersion\": 1,\n      \"position\": [\n        200,\n        100\n      ]\n    },\n    {\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"output\",\n              \"value\": \"={{ $json.key ? `Issue Created: ${$json.key}` : 'Failed to create issue' }}\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"name\": \"Set Create Outcome\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 1,\n      \"position\": [\n        200,\n        -20\n      ]\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Telegram Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Prompt\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Prompt\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent GPT-4o\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent GPT-4o\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse AI Output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse AI Output\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch Operation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch Operation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Jira Create Issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Jira List Projects\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Chat ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram Reply\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent GPT-4o\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Jira Create Issue\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Create Outcome\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Jira List Projects\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Count Projects\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Count Projects\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Chat ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Create Outcome\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Chat ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"active\": false,\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"bcbdc6ec-c92e-4958-a4ca-27f455e5adc2\",\n  \"meta\": {\n    \"templateCredsSetupCompleted\": true,\n    \"instanceId\": \"0a939da4d64e88edbb5507e058f58d634df91ab412c7e92c4c2b66dfd0bd5a98\"\n  },\n  \"id\": \"ewfWyAx8KbQsKRvK\",\n  \"tags\": []\n}